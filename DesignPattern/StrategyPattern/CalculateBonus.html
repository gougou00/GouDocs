<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Calculate Bonus</title>
</head>
<body>

	<script>
		// // 1.计算奖金数额
		// // performanceLevel: 绩效，salary：工资
		// var calculateBonus = function(performanceLevel, salary) {
		// 	if (performanceLevel === 'S') {
		// 		return salary * 4;
		// 	}
		// 	if (performanceLevel === 'A') {
		// 		return salary * 3;
		// 	}
		// 	if (performanceLevel === 'B') {
		// 		return salary * 2;
		// 	}
		// };
		// console.log(calculateBonus('B', 20000));
		// console.log(calculateBonus('S', 6000));


		// // 2.使用组合函数重构代码
		// var performanceS = function(salary) {
		// 	return salary * 4;
		// }
		// var performanceA = function(salary) {
		// 	return salary * 3;
		// }
		// var performanceB = function(salary) {
		// 	return salary * 2;
		// }

		// var calculateBonus = function(performanceLevel, salary) {
		// 	if (performanceLevel === 'S') {
		// 		return performanceS(salary);
		// 	}
		// 	if (performanceLevel === 'A') {
		// 		return performanceA(salary);
		// 	}
		// 	if (performanceLevel === 'B') {
		// 		return performanceB(salary);
		// 	}
		// };
		// console.log(calculateBonus('A', 10000));


		// // 3.模仿传统面向对象版本的策略模式重构代码
		// // 封装具体实现（策略类）
		// var performanceS = function() {};
		// performanceS.prototype.calculate = function(salary) {
		// 	return salary * 4;
		// }
		// var performanceA = function() {};
		// performanceA.prototype.calculate = function(salary) {
		// 	return salary * 3;
		// }
		// var performanceB = function() {};
		// performanceB.prototype.calculate = function(salary) {
		// 	return salary * 2;
		// }
		// // 定义奖金类Bonus
		// var Bonus = function() {
		// 	// 原始工资
		// 	this.salary = null;
		// 	// 绩效对应的策略对象
		// 	this.strategyObj = null;
		// }
		// Bonus.prototype.setSalary = function(salary) {
		// 	// 设置原始工资
		// 	this.salary = salary;
		// }
		// Bonus.prototype.setStrategyObj = function(strategyObj) {
		// 	// 设置绩效对应的策略对象
		// 	this.strategyObj = strategyObj;
		// }
		// Bonus.prototype.getBonus = function() {
		// 	// 委托给对应的策略对象
		// 	return this.strategyObj.calculate(this.salary);
		// }
		// // 创建一个Bonus对象
		// var bonusDemo = new Bonus();
		// // 设置初始工资
		// bonusDemo.setSalary(10000);
		// // 设置策略对象
		// bonusDemo.setStrategyObj(new performanceS());
		// console.log(bonusDemo.getBonus());
		// bonusDemo.setStrategyObj(new performanceA());
		// console.log(bonusDemo.getBonus());


		// 4.JS版本的策略模式重构
		// 直接定义策略函数
		var strategies = {
			"S": function(salary) {
				return salary * 4;
			},
			"A": function(salary) {
				return salary * 3;
			},
			"B": function(salary) {
				return salary * 2;
			}
		};
		var calculateBonus = function(level, salary) {
			return strategies[level](salary);
		};
		console.log(calculateBonus('S', 20000));
		console.log(calculateBonus('A', 10000));

		
	</script>
</body>
</html>